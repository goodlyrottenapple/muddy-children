<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory MuddyChildren (Isabelle2017: October 2017)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory MuddyChildren</h1>

<span class="command">theory</span> <span class="name">MuddyChildren</span><br/>
<span class="keyword">imports</span> <a href="DEAKDerivedRules.html"><span class="name">DEAKDerivedRules</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="keyword1"><span class="command">theory</span></span><span class=""> </span><span class="">MuddyChildren</span><span class="">
</span><span class="keyword2"><span class="keyword">imports</span></span><span class=""> </span><span class="">Main</span><span class=""> </span><span class="">DEAKDerivedRules</span><span class=""> </span><span class="string">&quot;calculus/src/isabelle/DEAK_SE&quot;</span><span class=""> </span><span class="">NatToString</span><span class="">
</span><span class="keyword2"><span class="keyword">begin</span></span><span class="">
</span><span class="">
</span><span class="comment">(*
Implements and follows closely the proof of Proposition 24 in (Ma-Palmigiano-Sadrzadeh, 2014), 
referred to in the comments below as [MPS].
We consider classical logic and define clean as the negation of dirty.
*)</span><span class="">
</span><span class="">
</span><span class="comment">(* as upto is not defined for nats in isabelle core theories, we introduce a sugar notation for constructing a list of nats from x to y: [[x .. y]] *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">upto&#39;</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; nat &#8658; nat list&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;[[_ .. _]]&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;upto&#39; x 0 = (if x = 0 then [0] else [])&quot;</span><span class=""> </span><span class="delimiter">|</span><span class="">
</span><span class="string">&quot;upto&#39; x (Suc y) = (if x &#8804; (Suc y) then (if x = Suc y then [Suc y] else (Suc y) # (upto&#39; x y)) else [])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">upto&#39;_simp1</span><span class="delimiter">[</span><span class="">simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;x &#8804; y &#10233; set ([[x .. y]]) = {x..y}&quot;</span><span class="">
</span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">y</span><span class="delimiter">,</span><span class=""> </span><span class="">auto</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">upto&#39;_simp2</span><span class="delimiter">[</span><span class="">simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;x &gt; y &#10233; set ([[x .. y]]) = {x..y}&quot;</span><span class="">
</span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">y</span><span class="delimiter">,</span><span class=""> </span><span class="">auto</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="comment">(* E f := &#8896;n i=1 fboxK i f. The intended meaning of the defined connective E is ‘Everybody knows’ *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">E</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Formula &#8658; Formula&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;E 0 formula = &#8868;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="delimiter">|</span><span class="">
</span><span class="string">&quot;E (Suc x) formula = (fboxK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc x`) formula) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (E x formula)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">E_der_simp</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">fixes</span></span><span class=""> </span><span class="">x</span><span class=""> </span><span class="">A</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#8896;i. 0 &lt; i &#8743; i &#8804; (Suc x) &#10233; loc &#8866;d ( E (Suc x) A )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` A )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">x</span><span class="delimiter">)</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">0</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">i_eq_1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;i = Suc 0&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">i_eq_1</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">E.simps</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Suc</span><span class=""> </span><span class="">x</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;i &#8804; Suc x&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">assm</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d E (Suc x) A <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` A <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">E.simps</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">assm</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;i = Suc (Suc x)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">E.simps</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">assm</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">E_der_simp2</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;&#8896;ag. LAgent ag &#8712; set loc&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#8896;x A. loc &#8866;d ( E (Suc x)<span class="hidden">&#8679;</span><sup>y</sup> A )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( A )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">y</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">k_apply.simps</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">E.simps</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">a</span><span class="delimiter">=</span><span class="string">&quot;`Suc x`&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Refl_ForwK</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">father</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Formula&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;father n = &#8897;<span class="hidden">&#8681;</span><sub>F</sub> map (Formula_Atprop &#8728; nat_to_string) [[1 .. n]]&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(* vision expresses the fact that every child knows whether each other child is clean or dirty *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">vision_aux</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; nat &#8658; Formula list&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;vision_aux _ 0 = []&quot;</span><span class=""> </span><span class="delimiter">|</span><span class="">
</span><span class="string">&quot;vision_aux m (Suc n) = (
  ((`m` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc n`) (`m` <span class="hidden">&#8681;</span><sub>F</sub>))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
  (((`m` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc n`) ((`m` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))
)
#
(
  (((`Suc n`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `m` ((`Suc n`) <span class="hidden">&#8681;</span><sub>F</sub>))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
  ((((`Suc n`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `m` (((`Suc n`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))
)
# vision_aux m n&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">vision&#39;</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Formula list&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;vision&#39; 0 = []&quot;</span><span class=""> </span><span class="delimiter">|</span><span class="">
</span><span class="string">&quot;vision&#39; (Suc x) = (vision_aux (Suc x) x) @ (vision&#39; x)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">vision</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Formula&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;vision x = &#8896;<span class="hidden">&#8681;</span><sub>F</sub> (vision&#39; x)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">vision_aux_contains1</span><span class=""> </span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;0 &lt; i &#8743; i &lt; (Suc x)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#8896; ii. 0 &lt; ii &#8743; ii &lt; i &#10233; (
   (((`Suc x`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `ii` ((`Suc x`) <span class="hidden">&#8681;</span><sub>F</sub>))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   ((((`Suc x`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `ii` (((`Suc x`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))
  )
   &#8712; set (vision_aux (Suc x) i)&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induction</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="">i</span><span class=""> </span><span class="">rule</span><span class="delimiter">:</span><span class=""> </span><span class="">vision_aux.induct</span><span class="delimiter">)</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">2</span><span class=""> </span><span class="">m</span><span class=""> </span><span class="">n</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;ii &lt; n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">2</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ii &#8805; n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">2</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ii &#8804; n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">i_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ii = n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="alt_string">`n &#8804; ii`</span><span class=""> </span><span class="">dual_order.antisym</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">n&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;n = Suc n&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="string">&quot;2.prems&quot;</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Suc_pred</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">i_def</span><span class=""> </span><span class="">vision_aux.simps</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class=""> </span><span class="">n&#39;_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">vision_aux.simps</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">n&#39;_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">vision_aux_contains2</span><span class=""> </span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;0 &lt; i &#8743; i &lt; (Suc x)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#8896; ii. 0 &lt; ii &#8743; ii &lt; i &#10233; (
   ((`ii` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc x`) (`ii` <span class="hidden">&#8681;</span><sub>F</sub>))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   (((`ii` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc x`) ((`ii` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))
  )
   &#8712; set (vision_aux (Suc x) i)&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induction</span><span class=""> </span><span class="">x</span><span class=""> </span><span class="">i</span><span class=""> </span><span class="">rule</span><span class="delimiter">:</span><span class=""> </span><span class="">vision_aux.induct</span><span class="delimiter">)</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">2</span><span class=""> </span><span class="">m</span><span class=""> </span><span class="">n</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;ii &lt; n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">2</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ii &#8805; n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">2</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ii &#8804; n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">i_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ii = n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="alt_string">`n &#8804; ii`</span><span class=""> </span><span class="">dual_order.antisym</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">n&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;n = Suc n&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="string">&quot;2.prems&quot;</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Suc_pred</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">i_def</span><span class=""> </span><span class="">vision_aux.simps</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class=""> </span><span class="">n&#39;_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">vision_aux.simps</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">n&#39;_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">vision_contains</span><span class=""> </span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">fixes</span></span><span class=""> </span><span class="">i</span><span class=""> </span><span class="">j</span><span class=""> </span><span class="">dirty_children</span><span class=""> </span><span class="">num_of_children</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;0 &lt; i &#8743; i &#8804; num_of_children&quot;</span><span class=""> </span><span class="string">&quot;0 &lt; j &#8743; j &#8804; num_of_children&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;i &#8800; j&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
  (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))) &#8712; set (vision&#39; num_of_children)&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">num_of_children</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">note</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;i &#8804; num_of_children&quot;</span><span class=""> </span><span class="delimiter">;</span><span class=""> </span><span class="">cases</span><span class=""> </span><span class="string">&quot;j &#8804; num_of_children&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` `j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` (`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)
    &#8712; set (vision&#39; num_of_children)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">vision&#39;.simps</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">j_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;j = Suc num_of_children&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="">goal2</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">num&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">num&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;num_of_children = Suc num&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Suc_pred</span><span class=""> </span><span class="">less_le_trans</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;((`Suc num_of_children` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` `Suc num_of_children` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    (((`Suc num_of_children` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `i` (`Suc num_of_children` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)
    &#8712; set (vision_aux (Suc num_of_children) num_of_children)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="">goal2</span><span class=""> </span><span class="">vision_aux_contains1</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">le_less</span><span class=""> </span><span class="">lessI</span><span class=""> </span><span class="">list.set_intros</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">vision_aux.simps</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">zero_less_Suc</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">j_def</span><span class=""> </span><span class="">vision&#39;.simps</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal3</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">i_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;i = Suc num_of_children&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="">goal3</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">num&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">num&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;num_of_children = Suc num&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Suc_pred</span><span class=""> </span><span class="">less_le_trans</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `Suc num_of_children` `j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `Suc num_of_children` (`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)
    &#8712; set (vision_aux (Suc num_of_children) num_of_children)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="">goal3</span><span class=""> </span><span class="">vision_aux_contains2</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">le_less</span><span class=""> </span><span class="">lessI</span><span class=""> </span><span class="">list.set_intros</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">list.set_intros</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">vision_aux.simps</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">zero_less_Suc</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">i_def</span><span class=""> </span><span class="">vision&#39;.simps</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal4</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">g1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">False</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">..</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="comment">(* no expresses the ignorance of the children about their own status *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">no</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Formula&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;no 0 = &#8868;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class="delimiter">|</span><span class="">
</span><span class="string">&quot;no (Suc x) = ( ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc x`) (`Suc x`) <span class="hidden">&#8681;</span><sub>F</sub> )
  &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> (`Suc x`) (( (`Suc x` ) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) ) ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( no x)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">no_imp</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">fixes</span></span><span class=""> </span><span class="">loc</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;0 &lt; i &#8743; i &#8804; Suc( x)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot; loc &#8866;d ( no (Suc x) ) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `i` (`i` ) <span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `i` ( ( (`i` ) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> )) ) <span class="hidden">&#8681;</span><sub>S</sub> &quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">induction</span><span class=""> </span><span class="">x</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">no.simps</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">i0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;i = Suc 0&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Suc_leI</span><span class=""> </span><span class="">goal1</span><span class=""> </span><span class="">le_antisym</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">i0</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">no.simps</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;i&#8804; (Suc x)&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">goal2</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">goal2</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Id</span><span class=""> </span><span class="">goal2</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">le_SucE</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="comment">(* the first parameter n encodes the number of children - 
   the second parameter J encodes the list of dirty children which is a subset of {1..n} *)</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">dirty</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; nat list &#8658; Formula &quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;dirty n J = (if &#8704;j &#8712; (set J). n &#8805; j &#8743; j &gt; 0 then 
  &#8896;<span class="hidden">&#8681;</span><sub>F</sub> (map (Formula_Atprop &#8728; nat_to_string) J) @
     (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) (filter (&#955;x. x &#8713; set J) [[1 .. n]])) else &#8868;<span class="hidden">&#8681;</span><sub>F</sub> )&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">dirty_vision_der</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">fixes</span></span><span class=""> </span><span class="">k</span><span class=""> </span><span class="">n</span><span class=""> </span><span class="">J</span><span class=""> </span><span class="">J&#39;</span><span class=""> </span><span class="">j</span><span class="">
</span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;0 &#8804; (Suc k) &#8743; (Suc k) &#8804; n&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;set J &#8838; {1..n}&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;j &#8712; set J&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;set J&#39; &#8801; set J - {j}&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">cut</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;f. CutFormula f &#8712; set loc&quot;</span><span class="">
</span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;loc &#8866;d (dirty n J <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (vision n <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty n J&#39;)) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">cond</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;j&#8712;set J. j &#8804; n &#8743; 0 &lt; j&quot;</span><span class=""> </span><span class="string">&quot;&#8704;j&#8712;set J&#39;. j &#8804; n &#8743; 0 &lt; j&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J&#39;) @ (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J]))) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J&#39;) @ (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J&#39;]))) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J&#39;))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
    ((&#8896;<span class="hidden">&#8681;</span><sub>F</sub> (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_unfold_2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J&#39;))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
    ((&#8896;<span class="hidden">&#8681;</span><sub>F</sub> (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J&#39;])))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_unfold_2b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">rule</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;f &#8712; set (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">conj_der1</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;f &#8712; set (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J&#39;]) - set (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Set.DiffI</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set [[1 ..n ]] = {1..n}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set [x&#8592; [[1 .. n]] . x &#8713; set J&#39;] = {1..n} - (set J - {j})&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set [x&#8592; [[1 .. n]] . x &#8713; set J] = {1..n} - (set J)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">      
</span><span class="">      
</span><span class="">      </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set J - {j} &#8838; {1..n}&quot;</span><span class=""> </span><span class="string">&quot;{j} &#8838; {1..n}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">,</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set [x&#8592; [[1 .. n]] . x &#8713; set J&#39;] - set [x&#8592; [[1 .. n]] . x &#8713; set J] = {j}&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">1</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">2</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">      
</span><span class="">      </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J&#39;]) - set (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J]) =
      image ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) ((set [x&#8592; [[1 .. n]] . x &#8713; set J&#39;]) - set [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;F f. F &#8800; {} &#8744; (f :: Formula) &#8713; F&quot;</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="">f1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J&#39;]) - set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J]) &#8800; {}&quot;</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="string">&quot;0&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">f2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J&#39;]) - set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J]) - insert (((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) j) (((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) ` {}) = {}&quot;</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">)</span><span class=""> </span><span class="">Diff_eq_empty_iff</span><span class=""> </span><span class="alt_string">`set [x&#8592; [[1 .. n]] . x &#8713; set J&#39;] - set [x&#8592; [[1 .. n]] . x &#8713; set J] = {j}`</span><span class=""> </span><span class="">image_diff_subset</span><span class=""> </span><span class="">image_insert</span><span class=""> </span><span class="">image_set</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="">f3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;insert (((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) j) (set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J&#39;]) - set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J]) - {((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) j}) = ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) ` {j}&quot;</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) j &#8712; set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J&#39;]) - set (map ((&#955;cs. (cs <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [n&#8592; [[1 .. n]] . n &#8713; set J])&quot;</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">f2</span><span class=""> </span><span class="">f1</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">f3</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="alt_string">`set [x&#8592; [[1 .. n]] . x &#8713; set J&#39;] - set [x&#8592; [[1 .. n]] . x &#8713; set J] = {j}`</span><span class=""> </span><span class="">insert_Diff</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">      
</span><span class="">      </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">0</span><span class=""> </span><span class="">3</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">f_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;f = (`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">comp_apply</span><span class=""> </span><span class="">imageE</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">f_def</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">subst1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` x <span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) J&#39; @ map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J] = 
    map (&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` x) (map ((&#955;x. x <span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) J&#39; @ map ((&#955;x. ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) [x&#8592; [[1 .. n]] .  x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">subst2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;((&#955;x. ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) = ((&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">meson</span><span class=""> </span><span class="">comp_apply</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">subst3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) = (&#955;x. (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">subst4</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) = (&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">meson</span><span class=""> </span><span class="">comp_apply</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">subst5</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` x <span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) = (&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">meson</span><span class=""> </span><span class="">comp_apply</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;loc &#8866;d ((&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J) @ (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J]))) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (vision n <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> ((map (Formula_Atprop &#8728; nat_to_string) J&#39;) @ (map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J&#39;]))))) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (Formula_Atprop &#8728; nat_to_string) J&#39; @ map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">FboxK_L</span><span class=""> </span><span class="">FboxK_R</span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (x <span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) J&#39; @ map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">subst1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_box_distrib</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (x <span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) J&#39;) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_unfold_2b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (Formula_Atprop &#8728; nat_to_string) J) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_unfold_2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.C_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. n]] . x &#8713; set J]) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>)) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>)))) [x&#8592; [[1 .. n]] . x &#8713; set J]) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conj_fold</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">subst3</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">subst4</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_impl_fold</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;x. (`x` <span class="hidden">&#8681;</span><sub>F</sub>)) J&#39;) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>)) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)))) J&#39;)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>)))) J&#39;) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) J&#39;)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conj_fold</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">subst5</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_impl_fold</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">vision_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">rule</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">rule</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;f &#8712; image (&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) (set J&#39;)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">list.set_map</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; set J&#39;. 0 &lt; x &#8743; x &#8804; n&quot;</span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; set J&#39;. x &#8800; j&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; (set J&#39;). ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8712; set (vision&#39; n)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="">cond</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">vision_contains</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">0</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal2</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;f &#8712; image (&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) (set [x&#8592; [[1 .. n]] . x &#8713; set J])&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">list.set_map</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; set [x&#8592; [[1 .. n]] . x &#8713; set J]. 0 &lt; x &#8743; x &#8804; n&quot;</span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; set [x&#8592; [[1 .. n]] . x &#8713; set J]. x &#8800; j&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">One_nat_def</span><span class=""> </span><span class="">Suc_eq_plus1</span><span class=""> </span><span class="">atLeastAtMost_iff</span><span class=""> </span><span class="">atLeastatMost_empty_iff</span><span class=""> </span><span class="">discrete</span><span class=""> </span><span class="">filter_is_subset</span><span class=""> </span><span class="">insert_Diff</span><span class=""> </span><span class="">insert_not_empty</span><span class=""> </span><span class="">subsetCE</span><span class=""> </span><span class="">upto&#39;_simp1</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;x &#8712; set [x&#8592; [[1 .. n]] . x &#8713; set J]. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8712; set (vision&#39; n)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="">cond</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">vision_contains</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">0</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">dirty_def</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cond</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">preFormula_father</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Locale&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;preFormula_father n = PreFormula (&#39;&#39;father&#39;&#39;@`n`) (father n)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">preFormula_no</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; Locale&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="string">&quot;preFormula_no n = PreFormula (&#39;&#39;no&#39;&#39;@`n`) (no n)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">dirtyChildren</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">fixes</span></span><span class=""> </span><span class="">J</span><span class="delimiter">::</span><span class="string">&quot;nat list&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">j</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">n</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;(Suc k) &#8804; (Suc n)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;set J &#8838; {1..Suc n}&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;card (set J) = Suc k&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;j &#8712; set J&quot;</span><span class="">  
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">preFather</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;n. preFormula_father (Suc n) &#8712; set loc&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">preNo</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;n. preFormula_no (Suc n) &#8712; set loc&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">rel_refl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;RelAKA rel &#8712; set loc&quot;</span><span class=""> </span><span class="string">&quot;&#8896; alpha a. rel alpha a = ([alpha]::Action list)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">cut</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;f. CutFormula f &#8712; set loc&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">agent</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;agent. LAgent agent &#8712; set loc&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;loc &#8866;d ((dirty (Suc n) J) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (k_apply (E (Suc n)) (Suc k) (vision (Suc n))))<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) (k_apply (Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`)) k (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `j` <span class="hidden">&#8681;</span><sub>F</sub>)) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">,</span><span class="">2</span><span class="delimiter">,</span><span class="">3</span><span class="delimiter">,</span><span class="">4</span><span class="delimiter">)</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">k</span><span class=""> </span><span class="">arbitrary</span><span class="delimiter">:</span><span class="">j</span><span class=""> </span><span class="">J</span><span class="delimiter">)</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">0</span><span class=""> </span><span class="comment">(* k=0, hence there is Suc k = 1 dirty child, called j, J={j} *)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">J_contains</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set J = {j}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">card_eq_SucD</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">fastforce</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">set_eq</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;{1..Suc n} - {j} = set ([x &#8592;  [[1 .. Suc n]]. x&#8800;j])&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">red_ax_1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n)) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    ((father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8594;<span class="hidden">&#8681;</span><sub>S</sub> (forwK<span class="hidden">&#8681;</span><sub>S</sub> `j` (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8594;<span class="hidden">&#8681;</span><sub>S</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub> <span class="hidden">&#8681;</span><sub>S</sub>))) &#10233; 
    loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub>  E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n)) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>0</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`j` <span class="hidden">&#8681;</span><sub>F</sub>) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply.simps</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="comment">(* begin proof red_ax_1.cs *)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Reduce_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.I_impL2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bigcomma_Nil_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bigcomma_Cons_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">rel</span><span class="delimiter">=</span><span class="">rel</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">beta</span><span class="delimiter">=</span><span class="string">&quot;(&#39;&#39;father&#39;&#39; @ `Suc n`)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">Swapout_R_1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">rel_refl</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class="delimiter">,</span><span class=""> </span><span class="">simp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(One<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`)) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(father (Suc n))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Pre_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">preFather</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">preFormula_father_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;One<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.One_R</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;father (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Pre_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">preFather</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">preFormula_father_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Reduce_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Atom</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.One_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="comment">(* end proof red_ax_1.cs *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">fboxK_map_subst</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;list. map (&#955;h. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) list =  map (Formula_FboxK `j`)  (map (&#955;h. ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) list)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">map_subst</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;map (&#955;h. (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) ( [[1 .. Suc n]]) = map (&#955;B. B &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) (map (Formula_Atprop &#8728; nat_to_string) ( [[1 .. Suc n]]))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">map_subst1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set ( [[1 .. Suc n]]) = set ([h&#8592; [[1 .. Suc n]] .  h &#8800; j]) &#8746; {j}&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="string">&quot;0.prems&quot;</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="string">&quot;0.prems&quot;</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">J_contains</span><span class=""> </span><span class="">One_nat_def</span><span class=""> </span><span class="">Un_insert_right</span><span class=""> </span><span class="alt_string">`{1..Suc n} - {j} = set [x&#8592; [[1 .. Suc n]] . x &#8800; j]`</span><span class=""> </span><span class="">insert_Diff</span><span class=""> </span><span class="">insert_subset</span><span class=""> </span><span class="">sup_bot.right_neutral</span><span class=""> </span><span class="">upto&#39;_simp1</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">map_subst2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set [[1 .. Suc n]] = set (j#[h&#8592; [[1 .. Suc n]] .  h &#8800; j])&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">der1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [h&#8592;[[1 .. Suc n]] . h &#8800; j]) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    forwK<span class="hidden">&#8681;</span><sub>S</sub> `j` (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8594;<span class="hidden">&#8681;</span><sub>S</sub> ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) <span class="hidden">&#8681;</span><sub>S</sub>)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [h &#8592;  [[1 .. Suc n]]. h&#8800;j])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">fboxK_map_subst</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_box_distrib</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">father_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) ( [[1 .. Suc n]]))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">l</span><span class="delimiter">=</span><span class="string">&quot;map (&#955;h. (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) (j#[h&#8592; [[1 .. Suc n]] .  h &#8800; j])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">conj_der2b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">conj_unfold_1a</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.I_impR2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">map_subst2</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">mono_tags</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">set_eq_subset</span><span class=""> </span><span class="">set_map</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">map_subst</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">disj_lub</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">map_subst3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;h &#8712; {1..Suc n} - {j}.
    loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    ((fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)))  <span class="hidden">&#8681;</span><sub>S</sub>) &#10233;
    loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [h&#8592;[[1 .. Suc n]] . h &#8800; j]) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_der1b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;h&#8712;{1..Suc n} - {j}. loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">{</span></span><span class=""> </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">ff</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="">Formula</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ff &#8712; (&#955;n. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`n` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) ` ({1..Suc n} - {j}) &#10230; ff &#8713; set (map (&#955;n. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`n` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [n&#8592;[[1 .. Suc n]] . n &#8800; j]) &#8744; loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ff <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;ff &#8713; set (map (&#955;n. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`n` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [n&#8592;[[1 .. Suc n]] . n &#8800; j]) &#8744; loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ff <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">)</span><span class=""> </span><span class="">set_eq</span><span class=""> </span><span class="">set_map</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">}</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="string">&quot;&#8704;f&#8712;set (map (&#955;n. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`n` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [n&#8592;[[1 .. Suc n]] . n &#8800; j]). loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> f <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">der2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;h. h &#8712; {1..Suc n} - {j} &#10233; loc &#8866;d fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j` (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (`h` <span class="hidden">&#8681;</span><sub>F</sub>)) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> forwK<span class="hidden">&#8681;</span><sub>S</sub> `j` `j` <span class="hidden">&#8681;</span><sub>F</sub> <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;&#8869;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.IW_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_L</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  
</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">fact_23_E_vision_der_vision</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(&#8896;h. h &#8712; {1..Suc n} - {j} &#10233; 
    loc &#8866;d (dirty (Suc n) J <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) <span class="hidden">&#8681;</span><sub>S</sub>) &#10233; 
    (&#8896;h. h &#8712; {1..Suc n} - {j} &#10233;
    loc &#8866;d (forwK<span class="hidden">&#8681;</span><sub>S</sub> `j` `h` <span class="hidden">&#8681;</span><sub>F</sub> <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> ((dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc 0 vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (father (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>)) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j` (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (`h` <span class="hidden">&#8681;</span><sub>F</sub>)) <span class="hidden">&#8681;</span><sub>S</sub>)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class=""> 
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`h` <span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.K_FS_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_K</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">    
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;vision (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">E_der_simp2</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">agent</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">list_eq</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;[x&#8592; [[1 .. Suc n]] . x &#8713; set J] = [x&#8592; [[1 .. Suc n]] . x &#8800; j]&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">J_contains</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">0</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">j_range</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;0 &lt; j &#8743; j &#8804; Suc n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">J_contains</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">f_subst</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) = ((&#955;x. (`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword3"><span class="command">def</span></span><span class=""> </span><span class="">left</span><span class=""> </span><span class="delimiter">&#8801;</span><span class=""> </span><span class="string">&quot;(&#955;x. ((`x` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `x` <span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">def</span></span><span class=""> </span><span class="">right</span><span class=""> </span><span class="delimiter">&#8801;</span><span class=""> </span><span class="string">&quot;(&#955;y. (((`y` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`y` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class="">
</span><span class="">    
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">der3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8896;h. h &#8712; {1..Suc n} - {j} &#10233; loc &#8866;d (dirty (Suc n) J <span class="hidden">&#8681;</span><sub>S</sub>) ;<span class="hidden">&#8681;</span><sub>S</sub> (vision (Suc n) <span class="hidden">&#8681;</span><sub>S</sub>) &#8866;<span class="hidden">&#8681;</span><sub>S</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) [h&#8592; [[1 .. (Suc n)]] .  h &#8800; j]&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">conj_der1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">set_eq</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">fastforce</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">vision_def</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">l&#39;</span><span class="delimiter">=</span><span class="string">&quot;map (&#955;x. (left x) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (right x) ) [h&#8592; [[1 .. (Suc n)]] . h &#8800; j]&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">conj_der2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map left [h&#8592; [[1 .. (Suc n)]] . h &#8800; j]) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map right [h&#8592; [[1 .. (Suc n)]] . h &#8800; j])&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">conj_fold</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">right_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">dirty_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. (Suc n)]] . x &#8800; j]&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">list_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">l</span><span class="delimiter">=</span><span class="string">&quot;map (Formula_Atprop &#8728; nat_to_string) J @ map ((&#955;x. (x <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8728; nat_to_string) [x&#8592; [[1 .. (Suc n)]] . x &#8800; j]&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">conj_der2b</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">j_range</span><span class=""> </span><span class="">J_contains</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Id</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">f_subst</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">conj_impl_fold</span><span class=""> </span><span class="">cut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">goal1</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set [h&#8592; [[1 .. Suc n]] . h &#8800; j] = { h. 0 &lt; h &#8743; h &#8804; Suc n &#8743; h&#8800;j }&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">a</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set (map (&#955;h. ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
      (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) [h&#8592; [[1 .. (Suc n)]] . h &#8800; j]) =
      image (&#955;h. ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
      (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) { h. 0 &lt; h &#8743; h &#8804; Suc n &#8743; h&#8800;j }&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">b</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8230; = { (((`h`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`h`) <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
      (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) | h. 0 &lt; h &#8743; h &#8804; Suc n &#8743; h&#8800;j }&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8230; &#8838; set (vision&#39; (Suc n))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">vision_contains</span><span class=""> </span><span class="">j_range</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">a</span><span class=""> </span><span class="">b</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">left_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">red_ax_1</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="comment">(* By DDT *)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="comment">(*der 2*)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;&#8896;<span class="hidden">&#8681;</span><sub>F</sub> map (&#955;h. fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> (`j` <span class="hidden">&#8681;</span><sub>F</sub>))) [h &#8592;  [[1 .. Suc n]]. h&#8800;j]&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">der1</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">map_subst3</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="comment">(* by FS2 *)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">rule</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Back_forw_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">FS_K_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="comment">(*By DDT 2*)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="comment">(* mon_diamK_j *)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j` (((`h` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (`h` <span class="hidden">&#8681;</span><sub>F</sub>))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">der2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">fact_23_E_vision_der_vision</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">der3</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="comment">(* -------------------- successor case for k  --------------------  *)</span><span class="">
</span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Suc</span><span class=""> </span><span class="">k</span><span class="delimiter">)</span><span class=""> </span><span class="comment">(* the number of dirty children is Suc(Suc k) *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">J&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">J&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set J&#39; = set J - {j}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">meson</span><span class=""> </span><span class="">set_removeAll</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">j&#39;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">j&#39;_def</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;j&#39; &#8712; set J&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Diff_empty</span><span class=""> </span><span class="">List.finite_set</span><span class=""> </span><span class="">Suc</span><span class="delimiter">(</span><span class="">4</span><span class="delimiter">)</span><span class=""> </span><span class="">Suc.prems</span><span class="delimiter">(</span><span class="">4</span><span class="delimiter">)</span><span class=""> </span><span class="">card_Diff_insert</span><span class=""> </span><span class="">card_eq_SucD</span><span class=""> </span><span class="">diff_Suc_1</span><span class=""> </span><span class="">empty_iff</span><span class=""> </span><span class="">insert_subset</span><span class=""> </span><span class="">order_refl</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">Suc</span><span class=""> </span><span class="">J&#39;_def</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;card (set J&#39;) = Suc k&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">Suc</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">ih</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot; &#8704;j&#8712;set J&#39;. loc &#8866;d (dirty (Suc n) J&#39; &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Diff_subset</span><span class=""> </span><span class="">Suc_leD</span><span class=""> </span><span class="">J&#39;_def</span><span class=""> </span><span class="">subsetCE</span><span class=""> </span><span class="">subsetI</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set J&#39; &#8838; {1..Suc n}&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">)</span><span class=""> </span><span class="">Diff_subset</span><span class=""> </span><span class="">Suc.prems</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">J&#39;_def</span><span class=""> </span><span class="">subsetCE</span><span class=""> </span><span class="">subsetI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">meson</span><span class=""> </span><span class="">Suc.hyps</span><span class=""> </span><span class="">Suc.prems</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Suc_leD</span><span class=""> </span><span class="alt_string">`card (set J&#39;) = Suc k`</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------ start of claim 1 ------------------ *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim10</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc (Suc k) vision (Suc n)) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( vision (Suc n) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n))))<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.C_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply.simps</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">E_der_simp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Suc</span><span class=""> </span><span class="">j&#39;_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">E_der_simp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">assms</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim11</span><span class="delimiter">:</span><span class="">  </span><span class="string">&quot;loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( vision (Suc n) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n))))<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; )) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">dirty_vision_der</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Suc</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">,</span><span class="">3</span><span class="delimiter">,</span><span class="">5</span><span class="delimiter">)</span><span class=""> </span><span class="">J&#39;_def</span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim12</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; )) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.K_mon_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim13</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim14</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( dirty (Suc n) J&#39; &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.C_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim15</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( dirty (Suc n) J&#39; &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">ih</span><span class=""> </span><span class="">Id</span><span class=""> </span><span class="">j&#39;_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim16</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d (dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc (Suc k) vision (Suc n)) <span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
   ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
       `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;dirty (Suc n) J &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (vision (Suc n) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim10</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim11</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim12</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot; fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> dirty (Suc n) J&#39; ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim13</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( dirty (Suc n) J&#39; &#8743;<span class="hidden">&#8681;</span><sub>F</sub> E (Suc n) <span class="hidden">&#8679;</span><sup>S</sup>uc k vision (Suc n) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim14</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
       `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim15</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
       `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim16</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------- end of claim 1 ------------------- *)</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------ start of claim 2 ------------------ *)</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="comment">(* In lem363_ we prove the different steps of Lemma 36.3 -- see p23 of the paper Ma Pal Sad*)</span><span class=""> 
</span><span class="">    
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363a</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> (no (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>
   &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) ) )&#8743;<span class="hidden">&#8681;</span><sub>F</sub> (
   ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
   (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup>(no (Suc n) )) ) )
   )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363b</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d
   ( ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) ) )&#8743;<span class="hidden">&#8681;</span><sub>F</sub> (
   ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
   (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> (no (Suc n) )) ) )
   )<span class="hidden">&#8681;</span><sub>S</sub>
   &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
   ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup>(no (Suc n) )) )
  ) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.C_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363c</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d
  ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
    (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup>(no (Suc n))) )
  ) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
  ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
    (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) )
  ) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_elim_diamA</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ( (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>) )) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> (fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ( (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impL_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">no_imp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">j&#39;_def</span><span class=""> </span><span class="">J&#39;_def</span><span class=""> </span><span class="">Suc</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363d</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d
   ( ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) )
  ) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
   `Suc n`) ( ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) 
   &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_FS_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363e</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d
   ( ( ( ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
   ( ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> (fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>))) )
  ) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> ( ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) 
   &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_BoxDiam</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363f</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d
   ( ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> ( ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) 
   &#8743;<span class="hidden">&#8681;</span><sub>F</sub> ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> ( &#8869;<span class="hidden">&#8681;</span><sub>F</sub> )) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">k_apply_elim_diamA</span><span class=""> </span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">a</span><span class="delimiter">=</span><span class="string">&quot;`j&#39;`&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Refl_ForwK</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">agent</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_K2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.K_FS_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_K</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.IW_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_L</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">lem363</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @  `Suc n`) ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> 
    (fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> (no (Suc n) )) )<span class="hidden">&#8681;</span><sub>S</sub>
  &#8866;<span class="hidden">&#8681;</span><sub>S</sub> ( ((`j` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot; (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
    fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @  `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` `j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
        fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> no (Suc n))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363a</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
    ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` )<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    ( fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> no (Suc n)))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363b</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot; ((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub>
   ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` `j&#39;` <span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
   ( fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ( (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) )) &quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363c</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) ( ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    ( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363d</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">      
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;( Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> ( ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    ( fdiamK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` ((`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)&#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363e</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363f</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Forw_back_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_nec_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">k_apply_DiamBot</span><span class="delimiter">)</span><span class="">
</span><span class="">   
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(father (Suc n)) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ((((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.A_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_unfold_bis</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_S_display_1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_S_display_2</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(One<span class="hidden">&#8681;</span><sub>F</sub> ((&#39;&#39;no&#39;&#39; @ `Suc n`))) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( `j` <span class="hidden">&#8681;</span><sub>F</sub>) &quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Reduce_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.One_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Atom</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_S_display_2back</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">k_apply_S_FS</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FS_A_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;(((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` `j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>) &#8743;<span class="hidden">&#8681;</span><sub>F</sub>
    fdiamA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FdiamA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> no (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.And_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FdiamA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">k_apply_S_F_forw_diam</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;no (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Pre_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">preNo</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">preFormula_no_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">lem363</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;`j` <span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">k_apply_S_Atom</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.C_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.I_impR2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Grishin_R2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_comma_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.IW_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bot_L</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_comma_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.E_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Grishin_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impR_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpL_comma_disp2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.W_impL_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------- end of claim 2 ------------------- *)</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------ start of claim 3 ------------------ *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim3</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d ( fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) )) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @  `Suc n`) fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) ) )<span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Back_forw_A</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.I_impR2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bigcomma_Nil_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Comma_impR_disp</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Bigcomma_Cons_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">rel</span><span class="delimiter">=</span><span class="">rel</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">beta</span><span class="delimiter">=</span><span class="string">&quot;&#39;&#39;father&#39;&#39; @ `Suc n`&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">Swapout_R_1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">rel_refl</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class="delimiter">,</span><span class="">simp</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.Reduce_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.ImpR_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;One<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.One_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;father (Suc n)&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.Pre_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">preFather</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">preFormula_father_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">Id</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------- end of claim 3 ------------------- *)</span><span class="">
</span><span class="">
</span><span class="comment">(* ------------------ start of claim 4 ------------------ *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">claim4</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;loc &#8866;d 
    ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`)  fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (  Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) ) )<span class="hidden">&#8681;</span><sub>S</sub> &#8866;<span class="hidden">&#8681;</span><sub>S</sub> 
    (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `j` <span class="hidden">&#8681;</span><sub>F</sub>) <span class="hidden">&#8681;</span><sub>S</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxA_L</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_S_display_1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">subst</span><span class=""> </span><span class="">k_apply_S_display_2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">derivable.FboxK_R</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">k_apply_S_display_2a</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">rel</span><span class="delimiter">=</span><span class="">rel</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">Swapout_R_2</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="">rel_refl</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">  
</span><span class="comment">(* ------------------- end of claim 4 ------------------- *)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (((`j` <span class="hidden">&#8681;</span><sub>F</sub>) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> &#8869;<span class="hidden">&#8681;</span><sub>F</sub> ) &#8743;<span class="hidden">&#8681;</span><sub>F</sub> father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
    `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>k</sup> fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j&#39;` (`j&#39;` <span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim1</span><span class=""> </span><span class="">Suc</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` (( father (Suc n) ) &#8594;<span class="hidden">&#8681;</span><sub>F</sub> ( (fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
    `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) ))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim2</span><span class=""> </span><span class="">Suc</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;(fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @
    `Suc n`)  fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` ( (Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`)) <span class="hidden">&#8679;</span><sup>S</sup>uc k (`j` <span class="hidden">&#8681;</span><sub>F</sub>)) )&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim3</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule_tac</span><span class=""> </span><span class="">f</span><span class="delimiter">=</span><span class="string">&quot;fboxA<span class="hidden">&#8681;</span><sub>F</sub> (&#39;&#39;father&#39;&#39; @ `Suc n`) Formula_FboxA (&#39;&#39;no&#39;&#39; @ `Suc n`) <span class="hidden">&#8679;</span><sup>S</sup>uc k fboxK<span class="hidden">&#8681;</span><sub>F</sub> `j` `j` <span class="hidden">&#8681;</span><sub>F</sub>&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">in</span></span><span class=""> </span><span class="">derivable.SingleCut</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">cut</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">claim4</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Id</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword2"><span class="keyword">end</span></span></pre>

</div>
</body>
</html>
